{"version":3,"file":"drag-drop.esm.mjs","sources":["../node_modules/ask-for-promise/src/askForPromise.js","../node_modules/@peter.naydenov/walk/src/findType.js","../node_modules/@peter.naydenov/walk/src/copyObject.js","../node_modules/@peter.naydenov/walk/src/validateForInsertion.js","../node_modules/@peter.naydenov/walk/src/main.js","../node_modules/dt-toolbox/dist/dtbox.esm.mjs","../node_modules/@peter.naydenov/dt-queries/dist/dt-queries.esm.mjs","../node_modules/@peter.naydenov/fsm/dist/fsm.esm.mjs","../src/fn/onEvent.js","../src/fn/index.js","../src/fn/minMax.js","../src/fn/updateSelection.js","../src/fn/drawSelection.js","../src/fn/targetList.js","../src/fn/findDropZone.js","../src/hooks/index.js","../src/hooks/onDrop.js","../src/hooks/onStartDragging.js","../src/hooks/onDropOut.js","../src/logic.js","../src/transitions/index.js","../src/transitions/start.js","../src/transitions/startSelection.js","../src/transitions/changeSelection.js","../src/transitions/endSelection.js","../src/transitions/addSingleItem.js","../src/transitions/removeSingleItem.js","../src/transitions/replaceSelection.js","../src/transitions/startDragging.js","../src/transitions/changeDragZone.js","../src/transitions/endDragging.js","../src/transitions/drop.js","../src/transitions/destory.js","../src/transitions/setConfig.js","../src/transitions/disable.js","../src/transitions/enable.js","../src/main.js"],"sourcesContent":["'use strict'\n/*\n   askForPromise Description\n   ========================\n   Returns object with the promise and related helper functions.\n   - Created March 12th, 2016;\n   - Promise with timeout added July 16th, 2017 (v.1.3.0);\n   - askForPromise.all & AskForPromise.sequence added October 15th, 2023(v.1.4.0);\n   - jsDocs type definitions added October 27th, 2023(v.1.5.0);\n   - Converted to ES6 module January 6th, 2024(v.2.0.0);\n   - Massive refactoring of the library. Method 'each' added December 18th, 2024(v.3.0.0);\n*/\n\n\n\n/**\n * @interface AskObject\n * @description Object with promise and related helper functions\n * @property {Promise} [promise] - Promise object if a single promise is created\n * @property {Array<AskObject>|null} [promises] - Array of promises if multiple promises are created\n * @property {Function} done - Resolve function\n * @property {Function} cancel - Reject function\n * @property {Function} each - Callback function to be called for each list item\n * @property {Function} onComplete - Function to be called after promise is resolved\n * @property {Function} timeout - Function to set timeout on promise\n */\n\n\n\n/**\n * Creates object with promise and related helper functions\n * @function askForPromise\n * @param {Array<any>} [list] - List of items that need to have a corresponding promise.(optional)\n * @returns {AskObject} Object with promise and related helper functions\n */\nfunction askForPromise ( list ) {\n        if ( list ) return _manyPromises ( list )\n        else        return _singlePromise ();\n } // askForPromise func.\n\n\n\n/**\n * @function sequence\n * @description Executes list of functions that return a promise in sequence.\n * @param {Array<Function>} list - List of functions that return a promise\n * @param {...any} args - Arguments to be passed to each function in the list\n * @returns {AskObject} - Object with promise and related helper functions\n */\n askForPromise.sequence = function promiseInSequence ( list, ...args ) {\n  const \n        task = askForPromise ()\n      , result = []\n      ;\n\n  function* listGen ( n ) {   for ( const el of n ) { yield el }} \n  const g = listGen ( list );\n\n  function wait ( n, ...args ) {   // Recursive function for calling function list in sequence\n      if ( n.done ) {\n               task.done ( result )\n               return\n          }\n      n.value (...args).then ( r => {\n              result.push ( r )\n              wait( g.next(), ...args, r )\n          }) \n      } // wait func.\n\n  wait ( g.next(), ...args ) // Starting with iteration of list\n  return task\n} // promiseInSequence func.\n\n\n\n/**\n * @function all\n * @description Executes list of functions that return a promise in parallel.\n * @param {Array<Function>} list - List of functions that return a promise\n * @param {...any} args - Arguments to be passed to each function in the list\n * @returns {AskObject} - Object with promise and related helper functions\n */\naskForPromise.all = function promiseAll ( list, ...args ) {\n  const \n        task = askForPromise ()\n      , result = []\n      , r = list.map ( (n,i) => { \n                            return (typeof n === 'function') ? n(...args).then ( r => result[i] = r   ) \n                                                             : n.then ( r => result[i] = r   )\n                        })\n      ;\n  Promise.all ( r ).then ( () => task.done(result)   )\n  return task\n} // promiseAll func.\n\n\n\n\n\n/**\n * Creates a single promise with helper functions.\n * @function _singlePromise Creates a single promise\n * @returns {AskObject} Object containing the promise and related helper functions such as:\n * - promise: The promise itself\n * - done: Function to resolve the promise\n * - cancel: Function to reject the promise\n * - each: Function to iterate over a single promise (no-op for a single promise)\n * - onComplete: Function to be called after the promise is resolved\n * - timeout: Function to set a timeout on the promise\n */\nfunction _singlePromise () {\n  let  done, cancel;\n  const x = new Promise ( (resolve, reject ) => { \n                                                  done   = resolve\n                                                  cancel = reject\n                                 })\n   /** @type {AskObject} */ \n   const askObject = { \n               promise    : x\n             , promises   : null\n             , done       \n             , cancel     \n             , each       : () => {}\n             , onComplete : _after(x)\n             , timeout    : () => {}\n           }\n\n    askObject.timeout = _timeout ( false, askObject )\n    askObject.each = (cbFn, ...args) => { cbFn({value: null, done: done, cancel: cancel, timeout: askObject.timeout}, ...args) }\n    \n    return askObject\n   } // _singlePromise func.\n\n\n\n/**\n * Creates an object with multiple promises and related helper functions.\n * @param {Array<any>} list - List of items that need to have a corresponding promise.\n * @returns {AskObject} Object containing the promises and related helper functions such as:\n * - promise: It's equal to Promise.all (list of promises)\n * - promises: An array of single promise objects\n * - done: Function to resolve all promises\n * - cancel: Function to reject all promises\n * - each: Function to iterate over the promises and call a callback function for each promise\n * - onComplete: Function to be called after all promises are resolved\n * - timeout: Function to set a timeout on all promises\n */\n function _manyPromises ( list ) {\n                                    let listOfPromiseObjects = list.map ( el => _singlePromise() )\n                                    let listOfPromises   = listOfPromiseObjects.map ( o => o.promise )\n                                    \n                                    listOfPromiseObjects [ 'promises' ] = listOfPromiseObjects\n                                    let onComplete = _after ( Promise.all (listOfPromises) )\n\n\n\n                                  /**\n                                   * Reads the state of a promise\n                                   * @function readPromiseState\n                                   * @description Returns the state of the promise as string: 'pending', 'fulfilled', or 'rejected'\n                                   * @param {Promise} promise - The promise to read the state of\n                                   * @returns {string} The state of the promise as string\n                                   */\n                                    function readPromiseState ( promise ) {\n                                            let state = 'pending';\n                                            promise.then ( () => state = 'fulfilled' )\n                                                    .catch ( () => state = 'rejected' )\n                                            return state\n                                      } // readPromiseState func.\n                                   \n\n\n                                  /**\n                                   * Iterates over the promises and calls the callback function for each.\n                                   * Callback function will receive an object with the following properties:\n                                   * - value: the value associated with the promise\n                                   * - done: the promise resolve function\n                                   * - cancel: the promise reject function\n                                   * - timeout: a function that sets the timeout on the promise\n                                   * @param {function} cbFn - callback function to be called for each promise\n                                   * @param {...any} args - additional arguments to be passed to the callback function\n                                   */\n                                    function each ( cbFn, ...args ) {\n                                            listOfPromiseObjects.forEach ( (prom,i) => cbFn ({\n                                                                                            value:list[i], \n                                                                                            done: prom.done, \n                                                                                            cancel: prom.cancel, \n                                                                                            timeout: prom.timeout, \n                                                                                            state: readPromiseState(prom.promise) \n                                                                                        }, \n                                                                                        ...args\n                                                                                      ))\n                                      } // each func.\n\n\n\n                                    /** @type {AskObject} */\n                                    const askObject = {\n                                                  promise    : Promise.all ( listOfPromises )\n                                                , promises   : listOfPromiseObjects\n                                                , done       : ( response )  => { listOfPromiseObjects.forEach ( o => o.done( response  ) )}\n                                                , cancel     : ( response )  => { listOfPromiseObjects.forEach ( o => o.cancel( response ) )}\n                                                , each\n                                                , onComplete : onComplete\n                                                , timeout    : () => {}\n                                            }\n                                    askObject.timeout = _timeout ( true, askObject )\n                                    return askObject\n   } // _manyPromises func.\n\n\n\n/**\n * Creates a function that will be called after promise is resolved\n * @param {Promise} x - The promise\n * @returns {Function} Function to be called after promise is resolved\n */\nfunction _after ( x ) {\n/**\n * @function onComplete\n * @description Function to be called after promise is resolved\n * @param {Function} fx - Function to be called after promise is resolved\n * @param {Function|null} [rejectFx] - Optional. Function to be called if promise is rejected\n * @returns {void} - Nothing\n */\nreturn function onComplete ( fx, rejectFx=null ) {\n                if ( rejectFx === null ) x.then ( res => fx(res) )\n                else                     x.then ( res => fx(res) , res => rejectFx(res)  )\n}} // _after func.\n\n\n\n/**\n * Creates a timeout function for the given promise(s) in the AskObject.\n * If `isList` is true, the timeout is applied to the collection of promises,\n * otherwise it is applied to a single promise.\n * \n * When the timeout duration (`ttl`) is reached before the promise(s) resolve,\n * the provided expiration message (`expMsg`) is returned.\n * \n * @param {boolean} isList - Flag indicating if the AskObject contains multiple promises.\n * @param {AskObject} askObject - The AskObject containing the promise(s) to apply the timeout to.\n * @returns {Function} - A function that sets a timeout on the promise(s) and updates the AskObject.\n */\n\nfunction _timeout ( isList, askObject ) {\n      let main;\n      \n      if ( isList ) main = Promise.all( askObject.promises.map ( o => o.promise ) );\n      else          main = askObject.promise;\n\n      /**\n       * @function timeout\n       * @description Sets timeout on promise\n       * @param {number} ttl - Timeout in milliseconds\n       * @param {string|number} expMsg - Message to be returned if timeout occurs\n       * @returns {AskObject} - Object with promise and related helper functions\n       */\n      return function timeout( ttl, expMsg ) {\n                let timer;\n                let timeout = new Promise ( (resolve, reject) => {\n                                        timer = setTimeout ( () => {\n                                                        resolve ( expMsg )\n                                                        Promise.resolve ( main )\n                                                    }, ttl)\n                                    }); // timeout\n                main.then ( () => clearTimeout(timer)   )                \n                askObject [ 'onComplete'] = _after ( Promise.race ([main, timeout])   )\n                return askObject\n            }\n    } // _timeout func.\n\n\n\nexport default askForPromise\n\n\n","function findType ( x ) {\n    if ( x == null              )   return 'simple' // null and undefined\n    if ( x.nodeType             )   return 'simple' // DOM node\n    if ( x instanceof Array     )   return 'array'\n    if ( typeof x === 'object'  )   return 'object'\n    return 'simple'   // number, bigint, string, boolean, symbol, function \n } // findType func.\n\n\n\n export default findType\n\n\n ","\"use strict\"\n\nimport findType from \"./findType.js\";\nimport validateForInsertion from \"./validateForInsertion.js\";\n\n\n\nfunction copyObject ( resource, result, extend, cb, breadcrumbs, ...args ) {\n    let \n          [ keyCallback, objectCallback ] = cb\n        , keys = Object.keys ( resource )\n        ;\n        \n    keys.forEach ( k => {\n                    let \n                          type = findType(resource[k])\n                        , item  = resource[k]\n                        , resultIsArray = (findType (result) === 'array') \n                        , keyNumber = !isNaN ( k )\n                        , IGNORE = Symbol ( 'ignore___' )\n                        , isRoot = (breadcrumbs === 'root' && k === 'root' )\n                        , br = isRoot ? 'root' : `${breadcrumbs}/${k}`\n                        ;\n        \n                    if ( type !== 'simple' && objectCallback ) {\n                                        item = objectCallback ({ value:item, key:k, breadcrumbs: br, IGNORE }, ...args )\n                                        if ( item === IGNORE )   return\n                                        type = findType ( item )\n                        }\n\n                    if ( isRoot ) {  \n                                extend.push ( generateList ( item, result,  extend, cb, br, args )   )\n                                return\n                        }\n                    \n                    if ( type === 'simple' ) {\n                                    if ( !keyCallback ) {\n                                            if ( !isRoot )   result[k] = item\n                                            return\n                                        }\n                                    let keyRes = keyCallback ({ value:item, key:k, breadcrumbs: br, IGNORE }, ...args );\n                                    if ( keyRes === IGNORE )   return\n                                    const canInsert = validateForInsertion ( k, result );  // Find if it's array or object?\n                                    if ( canInsert )    result.push ( keyRes ) // It's an array\n                                    else                result [k] = keyRes    // It's an object\n                        }\n                        \n                    if ( type === 'object' ) {\n                            const newObject = {};\n                            if ( resultIsArray && keyNumber )   result.push ( newObject )\n                            else                                result[k] = newObject\n                            extend.push ( generateList ( item, newObject,  extend, cb, br, args ) )\n                       }\n                       \n                    if ( type === 'array' ) {\n                            const newArray = [];\n                            if ( resultIsArray && keyNumber )   result.push ( newArray )\n                            else                                result[k] = newArray\n                            extend.push ( generateList( item, newArray, extend, cb, br, args ) )\n                        }\n            })\n} // copyObject func.\n\n\n\nfunction* generateList ( data, location, ex, callback, breadcrumbs, args ) {\n    yield copyObject ( data , location, ex, callback, breadcrumbs, ...args )  \n} // generateList func.\n\n\n\nexport default copyObject\n\n\n","function validateForInsertion ( k, result ) {\n    const inArray = result instanceof Array;\n    if ( !inArray )   return false\n    const isNumber = !isNaN ( k );\n    if ( isNumber )   return true\n    else              return false\n} // validateForInsertion func.\n\n\n\nexport default validateForInsertion\n\n\n","\"use strict\"\n\n/**\n *     Walk\n * \n *     Alternative of deep-copy that provides much better control during creation of immutable \n *     copies of javascript data structures. \n *     Library is using 'generator functions'. If support for old browsers is required, \n *     add a polyfill for 'generators'.\n * \n *     History notes:\n *        - Development started on March 2nd, 2022\n *        - Published on GitHub for first time: March 4th, 2022\n *        - Object callback. May 23th, 2022\n *        - Interface changes - Named arguments. September 18th, 2022\n *        - Version 5. Object callback with 'root' object. November 28th, 2024\n */\n\n\n\nimport findType    from \"./findType.js\";\nimport copyObject from \"./copyObject.js\";\n\n\n/**\n *  @typedef {object} Options\n *  @property {any} data - Required. Any JS data structure that will be copied.\n *  @property {function} [keyCallback] - Optional. Function executed on each primitive property.\n *  @property {function} [objectCallback] - Optional. Function executed on each object property.\n */\n\n\n/**\n *  Walk\n * \n *  Creates an immutable copies of deep javascript data structures. \n *  Executes callback functions on every object/array property(objectCallback) and every primitive property(keyCallback). \n *  Callbacks can modify result-object by masking, filter or substitute values during the copy process.\n *  \n *  @function walk\n *  @param {Options} options   - Required. Object with required 'data' property and two optional callback functions: keyCallback and objectCallback. \n *  @param {...any} args - Optional. Additional arguments that could be used in the callback functions.\n *  @returns {any} - Created immutable copy of the 'options.data' property.\n *  @example\n *  // keyCallbackFn - function executed on each primitive property\n *  // objectCallbackFn - function executed on each object property\n *  let result = walk ({ data:x, keyCallback:keyCallbackFn, objectCallback : objectCallbackFn })\n * \n * \n *  // NOTE: objectCallback is executed before keyCallback! \n *  // If you modify object with objectCallback, then keyCallback \n *  // will be executed on the result of objectCallback\n */\nfunction walk (options,...args) {\n    let \n          { data:origin, keyCallback, objectCallback } = options\n        , type = findType ( origin )\n        , result\n        , extend = []\n        , breadcrumbs = 'root'\n        , cb = [ keyCallback, objectCallback ]\n        ;\n\n    switch ( type ) {\n            case 'array'  :\n                                result = []\n                                copyObject ( {root:origin}, result, extend, cb, breadcrumbs, ...args )\n                                break\n            case 'object' :\n                                result = {}\n                                copyObject ( {root:origin}, result, extend, cb, breadcrumbs, ...args )\n                                break\n            case 'simple' :\n                                return origin\n        } // switch type\n        \n    for ( const plus of extend ) {   plus.next() }\n    return result\n} // walk func.\n\n\n\nexport default walk\n\n\n","import t from\"@peter.naydenov/walk\";function e(t,e){return function(n,r){const{convert:o,isDTO:s,isDTM:c,walk:a}=t();let u,i;s(r)?(u=r.export(),i=r.copy()):c(r)?(u=a({data:r}),i=a({data:r})):([i,,u]=o.from(\"std\").toFlat(t,r),console.warn('A non \"dt-object\" data segment was inserted. Autoconverted to \"dt-object\".'));const l=new RegExp(\"^root/\");u.forEach((t=>{t[0]===t[2]&&(t[0]=n,t[2]=n),t[2]=t[2].replace(l,`${n}/`),t[3].forEach(((e,r)=>t[3][r]=e.replace(l,`${n}/`)))})),e.insert([i,,u])}}function n(t,e){return t=>e.export(t)}function r(t,e){return function(n=\"root\"){const r=e.getCopy(n),{walk:o}=t();return r?o({data:r}):null}}function o(t,e,n){return function(){let r=[],o={};const{convert:s,draft:c,INIT_DATA_TYPES:a,main:{load:u}}=t(),i={set:c.set(r,o),connect:c.connect(o),save:c.save(o),push:c.push(o)},[l,...f]=arguments,{as:p}=l({...n,...i},...f)||{},d=0===r.length?e.export():r,h=!!p&&a.includes(p);let m;return\"dt-object\"===p?u(d):p&&!h?(console.error(`Model '${p}' is unknown data-model.`),null):(m=p?s.to(p,t,d):u(d),e.resetScan(),m)}}function s(t,e,n){return function(){const{main:{load:r},draft:o}=t(),[s,...c]=arguments;let a=[],u={};const i={set:o.set(a,u),connect:o.connect(u),save:o.save(u),push:o.push(u)};return s({...n,...i},...c),e.resetScan(),0===a.length?this:r(a)}}function c(t){return function(e,n){t.setupFilter(e,n)}}function a(t,a){const{flatData:u}=t(),[i,l]=u(t,a),f={insertSegment:e(t,i),export:n(0,i),copy:r(t,i),model:o(t,i,l),query:s(t,i,l),setupFilter:c(i),listSegments:()=>Object.keys(i.getIndexes()).reduce(((t,e)=>(e.includes(\"/\")||t.push(e),t)),[]),index:p};function p(t){if(null==t)return null;let e=i.getLine(t);if(e){let t,[n,r,o,s]=e;return t=r instanceof Array?[...r]:{...r},[n,t,o,[...s]]}return null}return f.extractList=function(t,e,n){return function(r,o){const s=n(\"root\"),{main:{load:c},INIT_DATA_TYPES:a}=t(),u=[...a,\"dt-object\"];let i=!1,l=\"\";if(o&&(o.as||(i=!0,l='Options should be an object and property \"as\" is required'),i||u.includes(o.as)||(i=!0,l=`Invalid option \"as\" value: ${o.as}.`),i))throw new Error(l);return r.map((t=>{let n=e.export(t);return 0===n.length?s[1].hasOwnProperty(t)?s[1][t]:null:n})).map((t=>null==t?null:t instanceof Array?c(t).model((()=>o)):t))}}(t,i,p),f}function u(t,e,n){return function(r){const[o,,s]=r,c=s[0][0],[a,u,i]=t,l=n();a[c]=o,s.forEach((t=>{const[,,n]=t;u[n]=t,i.push(t),l.forEach((n=>e(n,t)))}))}}function i(t){return function(e){const[,n,r]=t;if(e&&!n[e])return[];if(!e){const t=[];return r.forEach((e=>{const[n,r,o,s]=e,c=r instanceof Array?[...r]:{...r};t.push([n,c,o,[...s]])})),t}const o=[];return r.forEach((t=>{const[n,r,s,c]=t,a=new RegExp(`^${e}/`);if(s===e||s.match(a)){let t=n===s?\"root\":n,e=r instanceof Array?[...r]:{...r},u=s.includes(\"/\")?s.replace(a,\"root/\"):\"root\",i=c.map((t=>t.replace(a,\"root/\")));o.push([t,e,u,i])}})),o}}function l(t,e,n,r){return function(o,s){const c=r(),[,,a]=t;if(c.includes(o))return console.error(`Filter name \"${o}\" is already defined`),this;e[o]=s,a.forEach((t=>n(o,t)))}}function f(t){return function(e){const n=t.getIndexes(),r=n[e],o=[];return r?(o.push(r),p(n,o,r[3]),t.setupScanList(o),this):(t.setupScanList([]),this)}}function p(t,e,n){n.forEach((n=>{const r=t[n];r&&(e.push(r),p(t,e,r[3]))}))}function d(t){return function(e){const n=[];return t.getScanList().forEach((t=>{t[0]===e&&n.push(t)})),t.setupScanList(n),this}}function h(t){return function(e){const n=[],r=e instanceof Array?e:[e];return t.getScanList().forEach((t=>{const e=t[0];r.forEach((r=>{e.includes(r)&&n.push(t)}))})),t.setupScanList(n),this}}function m(t){return function(e){t.getScanList().forEach((n=>{const[r,o,s,c]=n,a=o instanceof Array,u=()=>\"$__NEXT__LOOK_\",i=()=>\"$__FINISH__WITH__THE__LOOKING_\";let l=!1;const f=c.map((t=>{let e=t.replace(`${s}/`,\"\");return[r,e]}));if(a)0===o.length?p([]):o.every(((t,n)=>{if(l)return!1;const c=e({value:t,key:n,name:r,flatData:o,breadcrumbs:s,links:f,next:u,finish:i});return\"$__FINISH__WITH__THE__LOOKING_\"===c&&(l=!0),![\"$__FINISH__WITH__THE__LOOKING_\",\"$__NEXT__LOOK_\"].includes(c)}));else{const t=Object.entries(o);0===t.length?p({}):t.every((([t,n])=>{if(l)return!1;const c=e({value:n,key:t,name:r,flatData:o,breadcrumbs:s,links:f,next:u,finish:i});return\"$__FINISH__WITH__THE__LOOKING_\"===c&&(l=!0),![\"$__FINISH__WITH__THE__LOOKING_\",\"$__NEXT__LOOK_\"].includes(c)}))}function p(t){e({value:null,key:null,name:r,flatData:t,breadcrumbs:s,links:f,empty:!0,next:u,finish:i})}t.resetScan()}))}}function b(t){return function(e){const n=[];return t.getScanList().every((t=>t[2]!==e||(n.push(t),!1))),t.setupScanList(n),this}}function _({flatData:t}){return t instanceof Array}function y({name:t,flatData:e}){return!(e instanceof Array)&&!isNaN(t)}function g({flatData:t}){return!(t instanceof Array)}function $({name:t,breadcrumbs:e}){return t===e}function E(t,e){const[n,r,o]=e,s=[n,r,o],c={},a={list:_,listObject:y,object:g,root:$};let p=o;const E=()=>Object.keys(a),j=(t,e)=>{if(a[t]){const[n,o,s,u]=e;if(c[t]||(c[t]=[]),a[t]({name:n,flatData:o,breadcrumbs:s,edges:u})){const e=r[s];c[t].push(e)}}};E().forEach((t=>o.forEach((e=>j(t,e)))));const v={insert:u(s,j,E),export:i(s),getCopy:t=>n[t]?n[t]:null,getIndexes:()=>r,getLine:t=>r[t]?r[t]:null,getFilters:()=>c,getScanList:()=>p,setupScanList:t=>p=t,setupFilter:l(s,a,j,E),resetScan:()=>{p=o}};var O;return[v,{from:f(v),use:(O=v,function(t){const e=O.getFilters()[t];return e&&O.setupScanList(e),this}),get:b(v),find:d(v),like:h(v),look:m(v)}]}var j={toFlat:function(t,e){const{walk:n}=t(),r=[],o={};return[{root:n({data:e,keyCallback:function({value:t,key:e,breadcrumbs:n}){const r=new RegExp(`/${e}$`),s=n.replace(r,\"\");return o[s][1][e]=t,t},objectCallback:function({value:t,key:e,breadcrumbs:n}){const s=\"root\"===n&&\"root\"===e,c=t instanceof Array?[]:{},a=e,u=new RegExp(`/${e}$`),i=n.replace(u,\"\"),l=[a,c,n,[]];return s||o[i][3].push(n),r.push(l),o[n]=r.at(-1),t}})},o,r]},toType:function(t){let e={};return t.reverse().forEach((([t,n,r,o])=>{const s=n instanceof Array?[...n]:{...n};e[r]=s,o.forEach((t=>{if(e[t]){const n=t.replace(`${r}/`,\"\");e[r][n]=e[t]}}))})),e.root}};var v={toFlat:function(t,e){const n=Object.entries(e),{walk:r}=t(),o={},s=[],c={},a={};function u(t){c[t]||(c[t]=\"object\");const e=t.split(\"/\");1!=e.length&&(e.pop(),1!=e.length&&u(e.join(\"/\")))}return n.forEach((([t,e])=>{t.startsWith(\"root\")||(t=`root/${t}`),u(t),function(t,e){Object.keys(e).forEach((e=>{isNaN(e)||(c[t]=\"array\")}))}(t,e),a[t]=e})),Object.entries(c).forEach((([t,e])=>{if(\"object\"===a[t])return;if(a[t]){const n=a[t]instanceof Array;if(\"array\"===e&&!n){const e=Object.values(a[t]);a[t]=e}return}const n=\"object\"===e?{}:[];a[t]=n})),Object.entries(a).sort().forEach((([t,e])=>{const n=t.split(\"/\").pop(),r=t.replace(`/${n}`,\"\"),c=[n,e instanceof Array?[...e]:{...e},t,[]];o[t]=c,s.push(c),\"root\"!==t&&r&&o[r]&&o[r][3].push(t)})),[r({data:e}),o,s]},toType:function(t){const e={};return t.forEach((t=>{const[,n,r]=t;if(0===Object.keys(n).length)return;const o=r.replace(\"root/\",\"\"),s=n instanceof Array?[...n]:{...n};e[o]=s})),e}};var O={toFlat:function(t,e){const{walk:n}=t(),r={},o={root:[]},s=[];function c(t){if(\"root\"===t)return;const e=t.split(\"/\");e.pop();const n=e.join(\"/\");o[n]||(o[n]=[]),n.includes(\"/\")&&c(n)}e.forEach((t=>{const[e,n]=t,r=\"root\"===e?\"root\":`root/${e}`;o[r]?o[r].push(n):o[r]=[n],c(r)}));let a=Object.entries(o).sort();const u={root:\"object\"};return a.forEach((([t,e])=>{if(\"root\"===t)return;const n=t.split(\"/\"),r=n.pop(),o=n.join(\"/\");\"array\"!==u[o]&&!isNaN(r)&&(u[o]=\"array\"),0===e.length&&(u[t]=\"object\")})),a=Object.entries(o).sort(),a.forEach((([t,e])=>{const[n,o,c]=function(t){let e,n,r;if(\"root\"==t)return e=\"root\",n=\"root\",r=null,[e,n,r];const o=t.split(\"/\");return 2===o.length&&(e=\"root\",n=\"root\",r=o.pop()),o.length>2&&(r=o.pop(),e=o.pop(),n=0===o.length?`root/${e}`:`${o.join(\"/\")}/${e}`),[e,n,r]}(t),a=0===e.length,i=1===e.length;let l,f;if(a){if(r[`${o}/${c}`])return;return null==c?(f=\"object\"===u.root?{}:[],l=[\"root\",f,\"root\",[]],r.root=l,void s.push(l)):(f=\"object\"===u[`${o}/${c}`]?{}:[],l=[c,f,`${o}/${c}`,[]],r[`${o}/${c}`]=l,void s.push(l))}if(!i)return l=[c,e,`${o}/${c}`,[]],r[`${o}/${c}`]=l,void s.push(l);if(r[`${o}`])r[o][1][c]=e[0];else{const t={};t[c]=e[0],l=[n,t,o,[]],r[o]=l,s.push(l)}})),s.reverse(),s.forEach((t=>{const[e,n,o]=t,s=o.replace(`/${e}`,\"\"),c=r[s];s!==o&&c&&c[3].push(o)})),s.reverse(),[n({data:e}),r,s]},toType:function(t){let e=[];return t.forEach((t=>{const[n,r,o]=t,s=r instanceof Array;let c=\"\";if(\"root\"!==n&&(c=o.replace(\"root/\",\"\")),s)return void(0==c.length?r.forEach(((t,n)=>e.push([\"root\",t]))):r.forEach((t=>e.push([c,t]))));Object.entries(r).forEach((([t,n])=>{0==c.length?e.push([t,n]):e.push([`${c}/${t}`,n])}))})),e}};const T=t=>(e,n)=>{switch(t){case\"std\":case\"standard\":return j.toFlat(e,n);case\"tuple\":case\"tuples\":return O.toFlat(e,n);case\"breadcrumb\":case\"breadcrumbs\":const t=Object.entries(n);return O.toFlat(e,t);case\"file\":case\"files\":const r=n.map((t=>{let e=t.split(\"/\");1===e.length&&(e=[\"root\"].concat(e));const n=e.pop();return[e.join(\"/\"),n]}));return O.toFlat(e,r);case\"midFlat\":return v.toFlat(e,n)}return[[\"object\",0],{}]};var I={from:function(t){return{toFlat:T(t)}},to:function(t,e,n){const r={},{walk:o}=e(),s=new Set,c=new Set;let a,u=0;switch(t){case\"flat\":case\"dt-model\":return o({data:n});case\"std\":case\"standard\":return j.toType(n);case\"midflat\":case\"midFlat\":return v.toType(n);case\"tuple\":case\"tuples\":return O.toType(n);case\"files\":return a=O.toType(n),a.map((([t,e])=>\"function\"==typeof e?`${t}/function:${e.name}`:e?.nodeType?`${t}/HtmlElement:${e.tagName?e.tagName.toLowerCase():\"notSpecified\"}`:\"root\"===t?e:`${t}/${e}`));case\"breadcrumb\":case\"breadcrumbs\":let t;return a=O.toType(n),a.forEach((([t,e])=>s.has(t)?c.add(t):s.add(t))),a.forEach((([e,n])=>{if(c.has(e)){t!==e&&(t=e,u=0),r[\"root\"===e?u:`${e}/${u}`]=n,u++}else r[e]=n})),r}}};function S(t,e,n){const r=t[e],o=r[2];r[2]=n,t[o]=r,r[3].forEach(((e,r)=>{const s=new RegExp(`^${o}/`),c=e.replace(s,`${n}/`);S(t[e],e,c)}))}var k={push:function(t){return function(e,n){const r=!!t[e]&&t[e][1];return r&&r instanceof Array?(\"object\"==typeof value||r.push(n),this):this}},set:function(t,e){return function(n,r){const o=r instanceof Array,s=[];return s.push(n),o?s.push([...r]):s.push({...r}),s.push(n),s.push([]),t.push(s),e[n]=s,this}},connect:function(t){return function(e){e.forEach((e=>{let n=e.split(\"/\");const r=n.pop(),o=n.pop(),s=t[o];if(!t[r])return this;if(!s)return this;if(s[1][r])return this;let c=`${s[2]}/${r}`;return S(t,r,c),s[3].includes(c)||s[3].push(c),this}))}},save:function(t){return function(e,n,r){const o=!!t[e]&&t[e][1];return o?(o[n]||(o[n]=r),this):this}}};const A=[\"std\",\"standard\",\"tuple\",\"tuples\",\"breadcrumb\",\"breadcrumbs\",\"file\",\"files\",\"midFlat\",\"midflat\",\"flat\",\"dt-model\"],F={dependencies:()=>({walk:t,flatData:E,flatObject:a,convert:I,INIT_DATA_TYPES:A,main:{load:F.load},isDTO:t=>\"function\"==typeof t.insertSegment,isDTM:t=>t instanceof Array&&(t[0]instanceof Array&&(4===t[0].length&&\"root\"===t[0][0])),draft:k}),init(t,e={}){let{model:n}=Object.assign({},{model:\"std\"},e),r=F.dependencies;if(!A.includes(n))return console.error(`Can't understand your data-model: ${n}. Please, find what is possible on https://github.com/PeterNaydenov/dt-toolbox`),null;return a(r,[\"flat\",\"dt-model\"].includes(n)?F.load(t):I.from(n).toFlat(r,t))},load(e){const n={};e.forEach((t=>{const[,,e]=t;n[e]=t}));const r=t({data:e});return a(F.dependencies,[r,n,e])},flating(t,e={}){let{model:n}=Object.assign({},{model:\"std\"},e);if(!A.includes(n))return null;let[,,r]=I.from(\"std\").toFlat(F.dependencies,t);return r},converting(t,e={}){let{model:n,as:r}=Object.assign({},{model:\"std\",as:\"std\"},e);if(!A.includes(n))return null;if(!A.includes(r))return null;let[,,o]=I.from(\"std\").toFlat(F.dependencies,t);return I.to(r,F.dependencies,o)},getWalk:()=>t},{init:w,load:N,flating:L,converting:x,getWalk:D}=F,H={init:w,load:N,flat:L,convert:x,getWalk:D};export{H as default};\n","function e(e,t){const n=[];if(!t.index&&\"function\"!=typeof t.index)return null;e.look((({name:s,flatData:o,breadcrumbs:r,next:c})=>{const a=o instanceof Array,i=t.index(r);let l=null;if(i){const c=i[1];if(a!=c instanceof Array)e.set(s,c);else if(a){c.length===o.length&&c.every(((e,t)=>e===o[t]))?e.set(s,[]):e.set(s,c)}else{const a=Object.entries(o),i={};a.forEach((([s,o])=>{const a=c[s];o!==a&&(i[s]=a),l=t.index(`${r}/${s}`),l&&(e.set(s,l),n.push(`${l[2]}/${l[0]}`),l=null)})),e.set(s,i)}}else a?e.set(s,[]):e.set(s,{});return r.includes(\"/\")&&e.connect([r]),c()}))}function t(e,t,n){t.query((t=>{t.look((({name:t,breadcrumbs:s,flatData:o,next:r})=>{const c=n(s);if(!c)return e.set(t,o),r();const a=o instanceof Array,[,i]=c;if(a!==i instanceof Array)e.set(t,o);else if(a){if(!(o.length===i.length&&o.every(((e,t)=>e===i[t]))))return e.set(t,o),r();const n=[];o.forEach((e=>{i.includes(e)||n.push(e)})),e.set(t,n)}else{const n=Object.entries(o),s={};n.forEach((([e,t])=>{i.hasOwnProperty(e)||(s[e]=t),t!==i[e]&&(s[e]=t)})),e.set(t,s)}return r()})),t.look((({links:t,next:n})=>{const s=t.map((([e,t])=>`${e}/${t}`));return e.connect(s),n()}))}))}function n(e,t){if(!t.index&&\"function\"!=typeof t.index)return null;e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=s instanceof Array,a=t.index(o);if(a){const t=a[1];if(c!=t instanceof Array)return r();if(c){const o=[];s.forEach(((e,n)=>{e===t[n]&&o.push(e)})),e.set(n,o)}else{const o=Object.entries(s),r={};o.forEach((([e,n])=>{n==t[e]&&(r[e]=n)})),e.set(n,r)}o.includes(\"/\")&&e.connect([o])}return r()}))}function s(e,t){if(!t.index&&\"function\"!=typeof t.index)return null;e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=s instanceof Array,a=t.index(o);if(!a)return e.set(n,s),r();const i=a[1];if(c!=i instanceof Array)e.set(n,s);else if(c){const t=[];s.forEach(((e,n)=>{i.includes(e)||t.push(e)})),e.set(n,t)}else{const t=Object.entries(s),o={};t.forEach((([e,t])=>{null==i[e]&&(o[e]=t)})),e.set(n,o)}return r()})),e.look((({links:t,next:n})=>{const s=t.map((([e,t])=>`${e}/${t}`));return e.connect(s),n()}))}function o(e,t){if(!t.index&&\"function\"!=typeof t.index)return null;e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=t.index(o),a=s instanceof Array;if(!c)return e.set(n,a?[]:{}),r();const[,i]=c;if(a!==i instanceof Array)e.set(n,i);else if(a)e.set(n,i);else{const t=Object.entries(s),o={};t.forEach((([e,t])=>{const n=i[e];void 0!==n&&(o[e]=n)})),e.set(n,o)}return r()})),e.look((({links:t,next:n})=>{const s=t.map((([e,t])=>`${e}/${t}`));return e.connect(s),n()}))}function r(e,t,n){const s=[];e.look((({name:t,flatData:n,breadcrumbs:s,next:o})=>(e.set(t,n),s.includes(\"/\")&&e.connect([s]),o()))),t.query((t=>{t.look((({name:t,flatData:o,breadcrumbs:r,next:c})=>{const a=o instanceof Array,i=n(r);if(null==i){e.set(t,o);const n=new RegExp(`/${t}$`),a=r.replace(n,\"\").split(\"/\").pop();return s.push(`${a}/${t}`),c()}const[,l]=i;if(a)o.forEach((n=>{l.includes(n)||e.push(t,n)}));else{Object.entries(o).forEach((([n,s])=>{void 0===l[n]&&e.save(t,n,s)}))}return c()}))})),s.length>0&&e.connect(s)}function c(e,t){e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=t.index(o),a=s instanceof Array;if(!c)return e.set(n,s),o.includes(\"/\")&&e.connect([o]),r();const[,i]=c,l=i instanceof Array,f=a?[...s]:[];if(a!=l)e.set(n,i);else if(a){Object.entries(i).forEach((([e,t])=>{f.includes(t)||f.push(t)})),e.set(n,f)}else{const t=Object.entries(s),o={};t.forEach((([e,t])=>{i.hasOwnProperty(e)?o[e]=`${t},${i[e]}`:o[e]=t})),e.set(n,o)}return o.includes(\"/\")&&e.connect([o]),r()}))}function a(e,t){const n=[];e.look((({name:s,flatData:o,breadcrumbs:r,links:c,next:a})=>{let i;const l=o instanceof Array;if(n.push(r),l){let c=[],l=[];if(o.forEach(((s,o)=>{const a=`${r}/${o}`,i=t.index(a);if(i){const t=i[1];t instanceof Array?t.push(s):t.___history=s,e.set(o,t),n.push(a),l.push(a)}else c.push(s)})),i=t.index(r),i){i[1]instanceof Array?(i[1].forEach((e=>{c.includes(e)||c.push(e)})),e.set(s,c)):c.push(i[1])}else{e.set(s,c);let n=r.split(\"/\");n.pop();let o=n.join(\"/\"),a=t.index(o)[1][s];a&&e.push(s,a)}return r.includes(\"/\")&&e.connect([r]),e.connect(l),a()}let f=Object.entries(o),u=Object.keys(o);return e.set(s,{}),r.includes(\"/\")&&e.connect([r]),i=t.index(r),f.forEach((([o,c])=>{const a=`${r}/${o}`,l=t.index(a);if(l){l[1]instanceof Array?(e.set(o,[]),e.push(o,c),l[1].forEach((t=>e.push(o,t)))):(e.set(o,l[1]),e.save(o,\"___history\",c)),e.connect([a])}else{const[,t]=i||[],r=t[o];r?(e.set(o,[c,r]),e.connect([a]),n.push(a)):e.save(s,o,c)}})),t.query((t=>{let n=c.map((([,e])=>e));t.look((({key:t,value:o,breadcrumbs:c,next:a})=>{if(c!==r)return a();n.includes(t)||u.includes(t)||null==t||e.save(s,t,o)}))})),a()})),t.query((t=>{t.look((({name:t,flatData:s,breadcrumbs:o,next:r})=>{if(!n.includes(o))return e.set(t,s),e.connect([o]),r()}))}))}function i(e,t){const n=[];e.look((({name:s,flatData:o,breadcrumbs:r,next:c})=>{const a=t.index(r),i=o instanceof Array;if(n.push(r),!a)return e.set(s,o),r.includes(\"/\")&&e.connect([r]),c();const[,l]=a,f=l instanceof Array,u=i?[...o]:[];if(i){if(f)l.forEach((e=>{u.includes(e)||u.push(e)}));else{Object.entries(l).forEach((([e,t])=>{u.includes(t)||u.push(t)}))}e.set(s,u)}else e.set(s,o);return r.includes(\"/\")&&e.connect([r]),c()})),t.query((t=>{t.look((({name:t,flatData:s,breadcrumbs:o,next:r})=>{if(!n.includes(o)){s instanceof Array&&(e.set(t,s),e.connect([o]))}return r()}))}))}function l(e,t){e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=t.index(o),a=s instanceof Array;if(!c)return e.set(n,s),o.includes(\"/\")&&e.connect([o]),r();const[,i]=c;if(a!==i instanceof Array)e.set(n,s);else if(a)e.set(n,i);else{e.set(n,{}),Object.entries(s).forEach((([t,s])=>{i.hasOwnProperty(t)?e.save(n,t,i[t]):e.save(n,t,s)}))}return o.includes(\"/\")&&e.connect([o]),r()}))}function f(e,t){const n=[];e.look((({name:s,flatData:o,breadcrumbs:r,next:c})=>{const a=t.index(r),i=o instanceof Array;if(n.push(r),!a)return e.set(s,o),r.includes(\"/\")&&e.connect([r]),c();const[,l]=a;if(i!==l instanceof Array)e.set(s,l);else if(i)if(\"...\"==l[0]){let t=[...o];l.forEach((e=>{\"...\"!=e&&(t.includes(e)||t.push(e))})),e.set(s,t)}else e.set(s,l);else{let t={...o};Object.entries(l).forEach((([e,n])=>t[e]=n)),e.set(s,t)}return r.includes(\"/\")&&e.connect([r]),c()})),t.query((t=>{t.look((({name:t,flatData:s,breadcrumbs:o,next:r})=>(n.includes(o)||(e.set(t,s),e.connect([o])),r())))}))}function u(e,t){e.look((({name:n,flatData:s,breadcrumbs:o,next:r})=>{const c=t.index(o),a=s instanceof Array;if(!c)return e.set(n,s),o.includes(\"/\")&&e.connect([o]),r();const[,i]=c,l=i instanceof Array,f=a?[...s]:[];if(a!=l)e.set(n,i);else if(a){Object.entries(i).forEach((([e,t])=>{f.includes(t)||f.push(t)})),e.set(n,f)}else{const t=Object.entries(s),o={};t.forEach((([e,t])=>{i.hasOwnProperty(e)?o[e]=`${i[e]},${t}`:o[e]=t})),e.set(n,o)}return o.includes(\"/\")&&e.connect([o]),r()}))}function d(e,t=[]){const n=[];let s;e.use(\"root\").look((({name:e,flatData:t,next:o})=>(n.push(e),\"root\"===e&&(s=t instanceof Array?\"array\":\"object\"),o())));const o=n.filter((e=>t.includes(e))),r=0===o.length,c=1===o.length;r&&(\"array\"===s?e.set(\"root\",[]):e.set(\"root\",{})),o.forEach((t=>{let n=[];e.from(t).look((({name:t,flatData:s,breadcrumbs:o,links:r,next:a})=>{t===o&&c?e.set(\"root\",s):e.set(t,s);const i=c?r.map((([e,t])=>`root/${t}`)):r.map((([e,t])=>`${e}/${t}`));return n=[...n,...i],a()})),e.connect(n)}))}function h(e,t=[]){const n=[];let s;e.use(\"root\").look((({name:e,flatData:o,next:r})=>(t.includes(e)||n.push(e),\"root\"===e&&(s=o instanceof Array?\"array\":\"object\"),r())));const o=0===n.length,r=1===n.length;o&&(\"array\"===s?e.set(\"root\",[]):e.set(\"root\",{})),n.forEach((t=>{let n=[];e.from(t).look((({name:t,flatData:s,breadcrumbs:o,links:c,next:a})=>{t===o&&r?e.set(\"root\",s):e.set(t,s);const i=r?c.map((([e,t])=>`root/${t}`)):c.map((([e,t])=>`${e}/${t}`));return n=[...n,...i],a()})),e.connect(n)}))}function b(e){const t={};e.look((({name:n,flatData:s,breadcrumbs:o,links:r,next:c})=>{if(e.set(n,s),\"root\"===n)return c();if(n===o&&e.connect([`root/${n}`]),r.forEach((([e,n])=>t[n]=[e,n])),t[n]){const[s,o]=t[n];e.connect([`${s}/${o}`])}return c()}))}function m(e){const t={};e.look((({name:n,flatData:s,links:o,next:r})=>{if(o.forEach((([e,n])=>{\"root\"!==e&&(t[n]=[e,n])})),e.set(n,s),t[n]){const[s,o]=t[n];e.connect([`${s}/${o}`])}return r()}))}function y(e,t){const n=t.export(\"root\")[0][1],s=[];let o=null;e.use(\"root\").look((({flatData:e,breadcrumbs:t,next:n})=>\"root\"===t?(o=e,n()):(s.push(t),n()))),o instanceof Array?e.set(\"root\",[]):e.set(\"root\",{}),s.forEach((s=>{let r=!1;const c={};t.query((t=>{t.from(s).look((({name:t,flatData:n,breadcrumbs:s,links:o,next:a})=>{if(r=!0,e.set(t,n),c.hasOwnProperty(s)){const[t,n]=c[s];e.connect([`${t}/${n}`])}return o.forEach((([e,t])=>c[`${s}/${t}`]=[e,t])),a()}))})),!r&&n.hasOwnProperty(s)&&(r=!0,e.save(\"root\",s,o[s])),r||e.from(s).look((({name:t,flatData:n,breadcrumbs:s,links:o,next:r})=>{if(e.set(t,n),c.hasOwnProperty(s)){const[t,n]=c[s];e.connect([`${t}/${n}`])}return o.forEach((([e,t])=>c[`${s}/${t}`]=[e,t])),r()}))})),Object.entries(o).forEach((([s,o])=>{const r={};let c=!1;t.query((t=>{t.from(s).look((({name:t,flatData:n,breadcrumbs:s,links:o,next:a})=>{if(c=!0,e.set(t,n),r.hasOwnProperty(s)){const[t,n]=r[s];e.connect([`${t}/${n}`])}return o.forEach((([e,t])=>r[`${s}/${t}`]=[e,t])),a()}))})),!c&&n.hasOwnProperty(s)&&(c=!0,e.save(\"root\",s,n[s])),c||e.save(\"root\",s,o)}))}export{r as add,c as append,e as change,a as combine,t as different,n as identical,i as insert,b as joinSegments,d as keepSegments,s as missing,f as overwrite,u as prepend,h as removeSegments,o as same,m as splitSegments,l as update,y as updateState};\n","import t from\"ask-for-promise\";import e from\"dt-toolbox\";import{updateState as n,joinSegments as a,splitSegments as o}from\"@peter.naydenov/dt-queries\";const i={_setTransitions:function(){return function(t,e){let n={},a={},o={};return t.forEach((t=>{const[i,s,r,c,u]=t,d=e[c],p=`${i}/${s}`;n[p]=d||null,a[p]=r,function(t){return t instanceof Array&&(2==t.length&&(t.forEach((t=>{if(!1!==t||\"string\"!=typeof t)return!1})),!0))}(u)&&(o[p]=[],o[p][0]=u[0],o[p][1]=u[1])})),{transitions:n,nextState:a,chainActions:o}}},_updateStateData:function(t){return function(e){const{dtbox:n,query:a}=t.dependencies;let o=\"javascriptObject\";return e.export&&(o=\"dt-object\"),e instanceof Array&&e[0][0]===e[0][2]&&e.every((t=>4===t.length))&&(o=\"dt-model\"),\"javascriptObject\"===o&&e instanceof Array?(console.error(\"State update failed. Reason: Received an array. Expectation: Object where top-level property name is the name of the data segment.\"),t.stateData):([\"javascriptObject\"].includes(o)&&(e=n.init(e).export()),[\"javascriptObject\",\"dt-model\"].includes(o)&&(e=n.load(e)),[\"javascriptObject\",\"dt-model\",\"dt-object\"].includes(o)&&(e=e.query(a.splitSegments)),t.stateData.query(a.updateState,e))}},_updateStep:function(t){return function(e,n,a){const{askForPromise:o}=t.dependencies,i=o(),s=`${t.state}/${n}`,r=t.callback;t.lock=!0,t._transit(i,s,a),i.onComplete((n=>{let a=t._getChain(s),o=n.response;if(n.success){if(t.state=t.nextState[s],null!=n.stateData&&(t.stateData=t._updateStateData(n.stateData)),r.positive.forEach((e=>e(t.state,o))),r.transition.forEach((e=>e(t.state,o))),a&&a[0])return void t._updateStep(e,a[0],o)}else if(r.negative.forEach((e=>e(t.state,o))),r.transition.forEach((e=>e(t.state,o))),a&&a[1])return void t._updateStep(e,a[1],o);e.done(o)})),i.promise.catch((()=>console.log(`Failed in step ${s}`)))}},_warn:function(t){return function(t){Object.entries(t).forEach((([t,e])=>{null==e&&console.log(`Warning: Transition for ${t} is not defined`)}))}},_transit:function(t){return function(){const[e,n,...a]=arguments,{state:o,stateData:i,dependencies:s}=t,r=t.transitions[n],c=t.api.extractList;\"function\"==typeof r?r({task:e,state:o,extractList:c,dependencies:s},...a):e.done({success:!1})}},_getChain:function(t){return function(e){const n=t.chainActions;return!!n[e]&&n[e]}},_triggerCacheUpdate:function(t){return function(){if(0!==t.cache.length){const{updateTask:e,action:n,dt:a}=t.cache[0];t.cache=t.cache.reduce(((t,e,n)=>(0!=n&&t.push(e),t)),[]),t._updateStep(e,n,a),e.onComplete((e=>t._onUpdateTask(e)))}}},_onUpdateTask:function(t){return function(e){const n=t.callback,a=t.dependencies.askForPromise(n.update);a.each((({value:n,done:a})=>{n(t.state,e),a()})),a.onComplete((e=>{t.lock=!1,t._triggerCacheUpdate()}))}},setDependencies:function(t){return function(e){t.dependencies={...t.dependencies,...e}}},getDependencies:function(t){return function(){return t.dependencies}},on:function(t){return function(e,n){const a=t.callback;a[e]&&a[e].push(n)}},off:function(t){return function(e){t.callback[e]&&(t.callback[e]=[])}},importState:function(t){return function({state:e,stateData:n}){const{dtbox:a,query:o}=t.dependencies;if(e&&(t.state=e,n)){const e=a.load(n).query(o.splitSegments);t.stateData=t.stateData.query(o.updateState,e)}}},exportState:function(t){return function(){const{query:e}=t.dependencies;return{state:t.state,stateData:t.stateData.query(e.joinSegments).export()}}},update:function(t){return function(e,n){const{askForPromise:a}=t.dependencies,o=a();return t.lock?(t.cache.push({updateTask:o,action:e,dt:n}),o.promise):(t._updateStep(o,e,n),o.onComplete((e=>t._onUpdateTask(e))),o.promise)}},reset:function(t){return function(){const{dtbox:e}=t.dependencies;t.state=t.initialState,t.stateData=e.load(t.initialStateData.export())}},ignoreCachedUpdates:function(t){return function(){t.cache.forEach((({updateTask:t,action:e,dt:n})=>t.cancel(`Action '${e}' was ignored`))),t.cache=[]}},getState:function(t){return function(){return t.state}},extractList:function(t){return function(e,n=!1){const a=t.dependencies.query;return 0==arguments.length?t.stateData.query(a.joinSegments).model((()=>({as:\"std\"}))):n?t.stateData.extractList(e,n):t.stateData.extractList(e,t.stateDataFormat)}}},s=e.getWalk();function r({init:r,behavior:c,stateData:u={},debug:d,stateDataFormat:p={as:\"std\"}},f={}){const l=this,h={};l.state=r||\"N/A\",l.initialState=r||\"N/A\",l.stateDataFormat=p,l.lock=!1,l.cache=[],l.dependencies={walk:s,dtbox:e,askForPromise:t,query:{splitSegments:o,joinSegments:a,updateState:n}},l.callback={update:[],transition:[],positive:[],negative:[]};for(let t in i)t.startsWith(\"_\")?l[t]=i[t](l):h[t]=i[t](l);l.api=h,l.stateData=e.init(u).query(o),l.initialStateData=e.init(u).query(o);const{transitions:m,nextState:g,chainActions:S}=l._setTransitions(c,f);return d&&(l._warn(m),global.debugFSM=l),l.transitions=m,l.nextState=g,l.chainActions=S,h}r.dependencies={walk:s,dtbox:e,askForPromise:t,query:{splitSegments:o,joinSegments:a,updateState:n}};export{r as default};\n","'use strict'\n// *** \n\nfunction getEventFunctions ( dragDrop, ignoreSelect ) {\n    return {\n          mouseDown: event => {\n                if ( event.target.draggable              )   return\n                if ( ignoreSelect && ignoreSelect(event) )   return\n                dragDrop.update ( 'select', {event})\n            }\n        \n        , mouseUp: event  => {\n                            if ( event.target.draggable ) {\n                                        if      ( event.altKey    )   dragDrop.update ( 'removeItem'  , {event} )\n                                        else if ( event.shiftKey  )   dragDrop.update ( 'addItem'     , {event} )\n                                        else                          dragDrop.update ( 'newSelection', {event} )\n                                        return\n                                }\n                            dragDrop.update ( 'end', {event})\n                    } \n        , mouseMove : event => {\n                            dragDrop.update ( 'move', {event})\n                    }\n\n        , dragStart : event => {\n                            dragDrop.update ( 'drag', {event})\n                    }\n        , dragEnd   : event => {\n                            dragDrop.ignoreCachedUpdates ()\n                            dragDrop.update ( 'end', {event})\n                    }\n        , dragOver  : event => event.preventDefault ()   // Prevent default to allow drop\n        , dragEnter : event => dragDrop.update ( 'move', {event})\n        , drop      : event => dragDrop.update ( 'drop', {event})\n    \n    }} // getEventFunctions func.\n\n\n\nexport default getEventFunctions\n\n\n","import minMax          from './minMax'\nimport updateSelection from './updateSelection'\nimport drawSelection   from './drawSelection'\nimport targetList      from './targetList'\nimport findDropZone     from './findDropZone'\n\nimport getEventFunctions from './onEvent'\n\n\nconst fn = {\n                  minMax\n                , updateSelection\n                , drawSelection\n                , targetList\n                , findDropZone\n\n                , getEventFunctions\n            }\n\n\nexport default fn\n\n\n","function minMax ({startX, startY, newX, newY}) {\n        let\n              xMin = Math.min ( startX, newX )\n            , xMax = Math.max ( startX, newX )\n            , yMin = Math.min ( startY, newY )\n            , yMax = Math.max ( startY, newY )\n            ;\n        return { xMin, xMax, yMin, yMax }\n} // minMax func.\n\n\n\nexport default minMax\n\n\n","function updateSelection ( coordinates, node ) {\n    const { xMin, xMax, yMin, yMax } = coordinates;\n    node.style.left   = `${xMin}px`\n    node.style.top    = `${yMin}px`\n    node.style.width  = `${xMax - xMin}px`\n    node.style.height = `${yMax - yMin}px`\n} // updateSelection func.\n\n\n\nexport default updateSelection\n\n\n","function drawSelection ( event, selectDraw ) {\n        let draw;\n        if ( !selectDraw ) {   // Create a selection block if not exists\n                    draw = document.createElement ( 'div' )\n                    draw.style.position = 'absolute'\n                    draw.style.border = '1px dotted #333'\n                    document.getElementsByTagName ( 'body' )[0].appendChild ( draw )\n            }\n        else {   // Load a selection block\n                    draw = selectDraw\n                    draw.style.visibility = 'visible'\n            }\n        draw.style.left   = `${event.clientX}px`\n        draw.style.top    = `${event.clientY}px`\n        draw.style.width  = '20px'\n        draw.style.height = '20px'\n        return draw\n} // drawSelection func.\n\n\n\nexport default drawSelection\n\n\n","'use strict'\nfunction targetList ( container ) {\n    return function targetList () {\n            let \n                  list = document.querySelectorAll ( '[draggable]' )\n                , selection = []\n                ;\n            list.forEach ( el => {\n                                if ( el.parentNode == container )   selection.push ( el )\n                    })\n            return selection\n    }} // targetList func.\n\n\n\nexport default targetList\n\n\n","function findDropZone ( node, dropStyle ) {\n        if ( typeof node === 'string'           )   return false\n        if ( node === document                  )   return false\n        if ( node.tagName == 'BODY'             )   return false\n        if ( node.classList.contains(dropStyle) )   return node\n        return findDropZone ( node.parentNode, dropStyle )\n} // findDropZone func.\n\n\n\nexport default findDropZone\n\n\n","import onDrop          from './onDrop'\nimport onStartDragging from './onStartDragging'\nimport onDropOut       from './onDropOut'\n\nconst hooks = {\n              onDrop\n            , onStartDragging\n            , onDropOut\n        }\n\n\n\nexport default hooks\n\n\n","/**\n * @type {Object} DropParams\n * @description The parameters passed to the hook 'onDrop'.\n * @property {Object} event - The event object.\n * @property {Object} dropZone - The drop zone element.\n * @property {HTMLElement} dragged - The dragged element.\n * @property {Array} selection - The dragged elements.\n * @property {Array} log - The log array.\n * @property {Object} dragOffset - Position of the drag start - {x,y}.\n */\n\n/**\n * @function onDrop\n * @description Executes when the user drops the dragged elements on a drop zone.\n * @param {DropParams} data - The data object passed to the hook 'onDrop'.\n * @returns { void }\n */\nfunction onDrop ({ event, dropZone, dragged, selection, log, dragOffset }) {\n        // Move dragged DOM elements to the selected drop target\n        if ( !dropZone )   return\n        selection.forEach ( el => {\n                        el.parentNode.removeChild ( el )\n                        dropZone.appendChild ( el )\n                })\n        dragged.style = ''\n} // onDrop func.\n\n\n\nexport default onDrop\n\n\n","function onStartDragging ({event, selection, draggedTransperency, selectStyle }) {\n            selection.forEach ( el => { \n                                    el.style.opacity = draggedTransperency\n                                    el.classList.add ( selectStyle )\n                        })\n    } // onStartDragging func.\n\n\n\nexport default onStartDragging\n\n\n","'use strict'\n/**\n * @type {Object} LogData\n * @description The data object contains drag and drop information.\n * @property {HTMLElement} source - The source container element.\n * @property {HTMLElement|Boolean} target - The target container element. If the drop is outside of a container, the value is false.\n * @property {HTMLElement} el - The dragged element.\n * @property {Function} sourceList - Returns the list of selected elements.\n */\n\n\n\n/**\n * @type {Object} DropOutParams\n * @description The parameters passed to the hook 'onDropOut'.\n * @property {DragEvent} event - The browser 'DragEvent'event object.\n * @property {Boolean} dropZone - Constant equal to false in this hook;\n * @property {HTMLElement} dragged - The dragged element.\n * @property {Array<HTMLElement>} selection - The dragged elements.\n * @property {LogData} log - The log object.\n * @property {Object} dragOffset - Position of the drag start - {x,y}.\n */\n\n\n\n/**\n *  @function onDropOut\n *  @description Executes when the user drops the dragged elements outside of a drop zone.\n *  @param {DropOutParams} data - The data object with named arguments.\n *  @returns { void }\n */\nfunction onDropOut ({event, dropZone, dragged, selection, log, dragOffset }) {\n        // Drop outside of container\n        console.log ( 'DROP OUT' )\n} // onDropOut func.\n\n\n\nexport default onDropOut\n\n\n","const table = [\n    // [ state     , action         , nextState   , functionName    , chainAction(optional)]\n      [ 'none'     , 'start'        , 'wait'      , 'setConfig' ,    [ 'start', false ]  ]\n    , [ 'wait'     , 'start'        , 'ready'     , 'start'                             ]\n\n    // Selecting\n    , [ 'ready'    , 'addItem'      , 'ready'     , 'addSingleItem'     ]\n    , [ 'ready'    , 'newSelection' , 'ready'     , 'replaceSelection'  ]\n    , [ 'ready'    , 'removeItem'   , 'ready'     , 'removeSingleItem'  ]\n    , [ 'ready'    , 'select'       , 'inSelect'  , 'startSelection'    ]\n    , [ 'inSelect' , 'move'         , 'inSelect'  , 'changeSelection'   ]\n    , [ 'inSelect' , 'end'          , 'ready'     , 'endSelection'      ]\n    \n    // Draging\n    , [ 'ready'    , 'drag'        , 'inDrag'     , 'startDragging'   ]\n    , [ 'inDrag'   , 'end'         , 'ready'      , 'endDragging'     ]\n    , [ 'inDrag'   , 'move'        , 'inDrag'     , 'changeDragZone'  ]\n    , [ 'inDrag'   , 'drop'        , 'inDrag'     , 'drop'            ]   \n    \n    // Mute for a while\n    , [ 'ready'   , 'disable'      , 'off'        , 'disable'     ]\n    , [ 'off'     , 'enable'       , 'ready'      , 'enable'      ]\n    \n    // Others\n    , [ 'off'     , 'changeConfig'  , 'off'        , 'setConfig'    ]\n    , [ 'ready'   , 'changeConfig'  , 'ready'      , 'setConfig'    ]\n    , [ 'ready'   , 'destroy'      , 'end'        , 'destroy'     ]\n    , [ 'off'     , 'destroy'      , 'end'        , 'destroy'     ]\n];\n\n\nconst logic = {\n                   init : 'none'\n                 , behavior : table\n                 , stateData : {\n                                  dropStyle            : 'dropzone'   // CSS class name for drop zone\n                                , selectStyle          : 'dd-select'  // CSS class name for selected drag elements\n                                , filter                : false        // CSS class name for selectable drag elements.\n                                , draggedTransperency  : 0.5          // Transperency of dragged DOM element\n                                , selection            : []           // Selected DOM elements\n                                , dragged              : null         // Dragged element. Could be one or many\n                                , activeDropZone       : null         // Active drop zone DOM element\n                                , activeZoneStyle      : 'actZone'    // Active drop zone style name\n                                , selectDraw           : null         // DOM node for showing selection\n                                , mouseSelection       : false        // Selection mode flag\n                                , hasDrop              : false        // Flag[boolean]. It's true when registered drop event.\n                                , dragOffset           : null         // Values: Null or object with {x,y} coordinates or of the drag click. Can be used in 'onDrop' function for precise positioning.\n\n                                , startX : 0\n                                , startY : 0\n                                , newX   : false\n                                , newY   : false\n                        }\n        }\n\n\n\nexport default logic\n\n\n","import start from './start'\nimport { startSelection   } from './startSelection'\nimport { changeSelection  } from './changeSelection'\nimport { endSelection     } from './endSelection'\nimport { addSingleItem    } from './addSingleItem'\nimport { removeSingleItem } from './removeSingleItem'\nimport { replaceSelection } from './replaceSelection'\n\nimport { startDragging    } from './startDragging'\nimport { changeDragZone   } from './changeDragZone'\nimport { endDragging      } from './endDragging'\nimport { drop             } from './drop'\n\nimport { destroy          } from './destory'\nimport { setConfig         } from './setConfig'\nimport { disable          } from './disable'\nimport { enable           } from './enable'\n\n\n\nconst tranistions = {\n                          start\n                        , startSelection\n                        , changeSelection\n                        , endSelection\n                        , addSingleItem\n                        , removeSingleItem\n                        , replaceSelection\n\n                        , startDragging\n                        , changeDragZone\n                        , endDragging\n                        , drop\n\n                        , destroy\n                        , setConfig\n                        , disable\n                        , enable\n                }\n\n\n\nexport default tranistions\n\n\n","function start ({ task, dependencies}, data ) {\n    // *** Register all events needed\n    let { eFn } = dependencies;\n    \n    document.addEventListener ( 'mousedown', eFn.mouseDown )\n    document.addEventListener ( 'mousemove', eFn.mouseMove )\n    document.addEventListener ( 'mouseup'  , eFn.mouseUp   )\n\n    document.addEventListener ( 'dragstart' , eFn.dragStart )\n    document.addEventListener ( 'dragend'   , eFn.dragEnd   )\n    document.addEventListener ( 'dragover'  , eFn.dragOver  )\n    document.addEventListener ( 'dragenter' , eFn.dragEnter )\n    document.addEventListener ( 'drop'      , eFn.drop      )\n\n    task.done ({ \n                      success  : true \n                    , response : data\n            })\n} // start func.\n\n\n\nexport default start\n\n\n","function startSelection ({ task, dependencies, extractList}, data ) {\n    const \n          { event } = data\n        , { fn    } = dependencies\n        , [ selectDraw ] = extractList ([ 'selectDraw' ])\n        , st = {}\n        ;\n    event.preventDefault ()\n    st.selectDraw = fn.drawSelection ( event, selectDraw )\n    st.mouseSelection = true\n    st.startX = event.clientX\n    st.startY = event.clientY\n\n    task.done ({\n                      success : true\n                    , stateData : st\n                })\n} // startSelection func.\n\n\n\nexport { startSelection }\n\n\n","function changeSelection ({task, dependencies, extractList}, data ) {\n    let\n          { event } = data\n        , { fn } = dependencies\n        , [ mouseSelection, selectDraw, startX, startY ] = extractList(['mouseSelection', 'selectDraw', 'startX', 'startY'])\n        ;\n    if ( !mouseSelection ) {  \n                    task.done ({ success: false })\n                    return\n        }\n\n    event.preventDefault ()\n    let \n        newX = event.clientX\n      , newY = event.clientY\n      ;\n\n    fn.updateSelection ( fn.minMax({startX,startY,newX,newY}), selectDraw )\n    task.done ({\n                      success : true\n                    , stateData : { newX, newY }\n            })\n\n} // changeSelection func.\n\n\n\nexport { changeSelection }\n\n\n","function endSelection ({task, dependencies, extractList}, data ) {\n    let \n          { event } = data\n        , { fn    } = dependencies\n        , [ \n              prevSelection\n            , startX\n            , startY\n            , newX\n            , newY\n            , selectDraw\n            , selectStyle\n            , filter \n                ] = extractList ([\n                                  'selection'\n                                , 'startX'\n                                ,'startY'\n                                ,'newX'\n                                ,'newY'\n                                ,'selectDraw'\n                                ,'selectStyle'\n                                ,'filter'\n                            ])\n        , selectionType = 'new'   // Types: new | expand | reduce \n        , selection = []\n        ;\n\n        event.preventDefault ()\n        selectDraw.style.visibility = 'hidden'\n\n        if ( !newX ) {   // No selection ( newX == false )\n                        prevSelection.forEach ( el => el.classList.remove ( selectStyle )   )\n                        selection = []\n                        task.done ({\n                                       success : true\n                                     , stateData : { selection }\n                                })\n                        return\n                } // !newX\n        \n        if ( event.altKey               )   selectionType = 'reduce'\n        if ( event.shiftKey             )   selectionType = 'expand'\n        if ( selectionType !== 'expand' )   prevSelection.forEach ( el => {\n                                                            el.classList.remove ( selectStyle )\n                                                    })\n        \n        let { xMin, xMax, yMin, yMax } = fn.minMax ({ startX, startY, newX, newY })\n        \n        \n        let \n              dragNodes = document.querySelectorAll ( '[draggable]' )\n            , list = []\n            ;\n\n        if ( filter ) {\n                    dragNodes.forEach ( el => {\n                                    if ( el.classList.contains(filter) )   list.push ( el )\n                            })\n            }\n        else        dragNodes.forEach ( el => list.push(el)   )\n        \n        list.forEach ( el => {\n                            let check = true;\n                            if ( check )   check = el.offsetLeft > xMin\n                            if ( check )   check = el.offsetTop > yMin\n\n                            if ( check ) {\n                                    let lastX = el.offsetLeft + el.clientWidth;\n                                    check = lastX < xMax\n                                }\n                            if ( check ) {\n                                    let lastY = el.offsetTop + el.clientHeight;\n                                    check = lastY < yMax\n                                }\n                            if ( check )   selection.push ( el )\n                })\n        \n        switch ( selectionType ) {\n                case 'new' :\n                            selection = selection.map ( el => {\n                                                            el.classList.add (selectStyle)  \n                                                            return el\n                                                        })\n                            break\n                case 'expand':\n                            selection = selection.reduce ((res,el) => {\n                                                                    if ( !res.includes(el) ) {  \n                                                                                    res.push ( el )\n                                                                                    el.classList.add ( selectStyle )\n                                                                        }\n                                                                    return res\n                                                            } , selection )\n                            break\n                case 'reduce':\n                            selection = selection.reduce ( (res,el) => {\n                                                                    if ( !selection.includes(el) ) {  \n                                                                                    res.push ( el )\n                                                                                    el.classList.add ( selectStyle )\n                                                                        }\n                                                                    return res\n                                                             },[])\n                            break\n            } // switch selectionType\n\n        const mouseSelection = false;\n        newX   = false\n        newY   = false\n\n        task.done ({\n                          success : true\n                        , stateData : { selection, mouseSelection, newX, newY }\n                })\n} // endSelection func.\n\n\n\nexport { endSelection }\n\n\n","function addSingleItem ( {task, extractList}, data ) {\n        let \n              { event } = data\n            , target = event.target\n            , [ selection, selectStyle, filter ] = extractList (['selection', 'selectStyle', 'filter'])\n            , listHasTarget = selection.includes ( target )\n            , validNode = true\n            ;\n        if ( filter )   validNode = target.classList.contains ( filter )\n        if ( !listHasTarget && validNode ) {  \n                selection.push ( target )\n                target.classList.add ( selectStyle )\n            }\n        task.done ({\n                          success : true\n                        , stateData : { selection }\n                })\n} // addSingleItem func.\n\n\n\nexport { addSingleItem }\n\n\n","function removeSingleItem ( {task, extractList}, data ) {\n        let \n              { event } = data\n            , target = event.target\n            , [ selection, selectStyle ] = extractList ([ selection, selectStyle ])\n            ;\n        selection = selection.reduce ( (res,el) => {\n                                if ( el != target )   res.push ( el )\n                                else    el.classList.remove ( selectStyle )\n                                return res\n                        },[])\n        task.done ({\n                          success : true\n                        , stateData : { selection }\n                })\n} // removeSingleItem func.\n\n\n\nexport { removeSingleItem }\n\n\n","function replaceSelection ( { task, extractList}, data ) {\n        let \n              { event } = data\n            , [ selectStyle, filter, selection ] = extractList ([ 'selectStyle', 'filter', 'selection' ])\n            , target = event.target\n            , validNode = true\n            ;\n\n        if ( filter )   validNode = target.classList.contains ( filter )\n        if ( !validNode ) {\n                    task.done ({ success : false })\n                    return\n            }\n\n        selection.forEach ( el => el.classList.remove ( selectStyle ) )\n        target.classList.add ( selectStyle )\n        selection = [ target ]\n        task.done ({\n                          success : true\n                        , stateData : { selection }\n                })\n} // replaceSelection func.\n\n\n\nexport { replaceSelection }\n\n\n","function startDragging ( {task, dependencies, extractList}, data ) {\n        let \n              { event  } = data\n            , { target } = event\n            , [ \n                  draggedTransperency\n                , selection\n                , selectStyle\n                , dropStyle\n                , filter\n              ] = extractList ([\n                                  'draggedTransperency'\n                                , 'selection'\n                                , 'selectStyle'\n                                , 'dropStyle'\n                                , 'filter'\n                          ])\n            , { hooks, fn, deps } = dependencies\n            , validTarget = true\n            , st = {}\n            ;\n\n        if ( filter )   validTarget = target.classList.contains ( filter )\n        if ( !validTarget ) {\n                task.done ({ success: false })\n                return\n            }\n\n        if ( selection.length === 0 )   selection = [ target ]\n        hooks.onStartDragging ({ event, selection, draggedTransperency, selectStyle, dependencies:deps })\n\n        st.dragged        = target\n        st.dragOffset     = { \n                                         x : event.offsetX\n                                        ,y : event.offsetY\n                                    }\n        st.selection      = selection\n        st.activeDropZone = fn.findDropZone ( target, dropStyle )\n        task.done ({\n                          success : true\n                        , stateData : st\n                })\n} // startDragging func.\n\n\n\nexport { startDragging }\n\n\n","function changeDragZone ( {task, dependencies, extractList}, data ) {\n    let \n          { event } = data\n        , { fn    } = dependencies\n        , [\n              oldDropZone\n            , dragged\n            , activeZoneStyle\n            , dropStyle \n          ] = extractList ([\n                              'activeDropZone'\n                            , 'dragged'\n                            , 'activeZoneStyle'\n                            , 'dropStyle' \n            ])\n        , actZone = false\n        ;\n        \n    if ( dragged.parentNode === event.target.parentNode ) {  \n                        task.done ({ success : true })                    \n                        return\n        }\n    actZone = fn.findDropZone ( event.target, dropStyle )\n    if ( !actZone ) {\n                    task.done ({ success : false })\n                    return\n        }\n    if ( actZone ) {\n                    if ( oldDropZone )   oldDropZone.classList.remove ( activeZoneStyle )\n                    actZone.classList.add ( activeZoneStyle )\n                    task.done ({\n                                  success : true\n                                , stateData : {\n                                                    activeDropZone : actZone\n                                            }\n                            })\n                    return\n        }\n    task.done ({ success : false })\n} // changeDragZone func.\n\n\n\nexport { changeDragZone }\n\n\n","function endDragging ( {task, dependencies, extractList}, data ) {\n    let\n          { hooks, fn, deps } = dependencies\n        , [\n                activeDropZone\n              , activeZoneStyle\n              , dragged\n              , selection\n              , selectStyle\n              , hasDrop\n          ] = extractList ([\n                                  'activeDropZone'\n                                , 'activeZoneStyle'\n                                , 'dragged'\n                                , 'selection'\n                                , 'selectStyle'\n                                , 'hasDrop'\n                                , 'dependencies'\n                      ])\n        , { event } = data \n        , log = []\n        ;\n        \n    if ( !hasDrop ) {\n                let dropZone = false;\n                selection.forEach ( el => {\n                            let \n                                sourceList = fn.targetList ( el.parentNode )\n                              , item = {\n                                            source : el.parentNode\n                                          , target : false\n                                          , el\n                                          , sourceList  // it's a function\n                                      }\n                              ;\n                            log.push ( item )\n                    })\n              hooks.onDropOut ({event, dropZone, dragged, selection, log, dependencies:deps })\n        }\n    if ( activeDropZone )   activeDropZone.classList.remove ( activeZoneStyle )\n    selection.forEach ( el => {\n                            el.classList.remove ( selectStyle )\n                            el.style.opacity = ''\n                            if ( !el.style[0] )   el.removeAttribute ( 'style' )\n                })\n\n    activeDropZone = null\n    selection      = []\n    hasDrop        = false\n    \n    task.done ({ \n                      success : true\n                    , stateData : { activeDropZone, selection, hasDrop }\n            })\n} // endDragging func.\n\n\n\nexport { endDragging }\n\n\n","function drop ( {task, dependencies, extractList}, data ) {\n    let \n          { event } = data\n        , [ activeDropZone, dragged, selection, dropStyle, dragOffset ] = extractList(['activeDropZone', 'dragged', 'selection', 'dropStyle', 'dragOffset'])\n        , { hooks, fn, deps } = dependencies\n        , log   = []\n        , targetList = fn.targetList ( event.target )\n        , dropZone = fn.findDropZone ( event.target, dropStyle)\n        , hasDrop = false\n        ;\n    event.preventDefault ()\n    if ( dropZone == activeDropZone ) {\n                selection.forEach ( el => {\n                              let \n                                  sourceList = fn.targetList ( el.parentNode )\n                                , item = {\n                                              source : el.parentNode\n                                            , target : dropZone\n                                            , el\n                                            , targetList  // it's a function\n                                            , sourceList  // it's a function\n                                        }\n                                ;\n                              log.push ( item )\n                      })\n                hooks.onDrop ({ event, dropZone, dragged, selection, log, dragOffset, dependencies:deps })\n                hasDrop = true\n        }\n    \n    dragOffset = null\n    task.done ({\n                      success : true\n                    , stateData : { hasDrop, dragOffset }\n            })\n} // drop func.\n\n\n\n\n\n\n\nexport { drop }\n\n\n","function destroy ({task, dependencies}) {\n        let  { eFn } = dependencies;\n        document.removeEventListener ( 'mousedown', eFn.mouseDown )\n        document.removeEventListener ( 'mousemove', eFn.mouseMove )\n        document.removeEventListener ( 'mouseup'  , eFn.mouseUp   )\n\n        document.removeEventListener ( 'dragstart' , eFn.dragStart )\n        document.removeEventListener ( 'dragend'   , eFn.dragEnd   )\n        document.removeEventListener ( 'dragover'  , eFn.dragOver  )\n        document.removeEventListener ( 'dragenter' , eFn.dragEnter )\n        document.removeEventListener ( 'drop'      , eFn.drop      )\n        task.done ({ success : true })\n} // destroy func.\n\n\n\nexport { destroy }\n\n\n","function setConfig ( {task}, data={} ) {\n    let { hooks, config }= data;\n    let st = {}\n\n    if ( !hooks )   hooks = {}\n    if ( !config )   config = {}\n\n    if ( config.onStartDragging )   hooks.onStartDragging = config.onStartDragging\n    if ( config.onDrop          )   hooks.onDrop          = config.onDrop\n    if ( config.onDropOut       )   hooks.onDropOut       = config.onDropOut\n\n    if ( config.dropStyle       && (typeof config.dropStyle === 'string')               )   st.dropStyle           = config.dropStyle\n    if ( config.draggedTransperency && (typeof config.draggedTransperency === 'number') )   st.draggedTransperency = config.draggedTransperency\n    if ( config.activeZoneStyle && (typeof config.activeZoneStyle === 'string')         )   st.activeZoneStyle     = config.activeZoneStyle\n    if ( config.selectStyle     && (typeof config.selectStyle === 'string')             )   st.selectStyle         = config.selectStyle\n    if ( config.filter           && (typeof config.filter === 'string')                   )   st.filter               = config.filter\n    \n    if ( config.dependencies   )   st.dependencies = config.dependencies\n    else                          st.dependencies = {}\n\n    task.done ({ \n                  success : true \n                , stateData: st\n                , response : hooks\n            })\n} // setConfig func.\n\n\n\nexport { setConfig }\n\n\n","function disable ( {task}) {\n    task.done ({ success : true })\n} // disable func.\n\n\n\nexport { disable }\n\n\n","function enable ( {task}) {\n    task.don ({ success : true })\n} // enable func.\n\n\n\nexport { enable }\n\n\n","'use strict'\n\nimport Fsm from '@peter.naydenov/fsm'                // Finite state machine. url: https://github.com/PeterNaydenov/fsm\n\nimport fn from './fn/index'                           // Helper functions;\nimport hooks from './hooks/index'                     // Hook functions;\nimport logic from './logic'                           // Fsm logic and state vars;\nimport transitions from './transitions/index'         // Fsm transition library\nimport getEventFunctions from './fn/onEvent';         // Functions registered on events\n\n\n\nfunction dragDrop ( config={} ) {\nconst \n      dragMachine = new Fsm ( logic, transitions )\n    , eFn         = getEventFunctions ( dragMachine, config.ignoreSelect )\n    ;\n    \n    window.dd = dragMachine  // TODO: remove \n\n    dragMachine.setDependencies ({ 'deps': config.dependencies })    \n    dragMachine.setDependencies ({ eFn, fn })\n    \n    return dragMachine.update ( 'start', { config, hooks } )\n               .then ( hooks => dragMachine.setDependencies ({ hooks })    )\n               .then ( () => ({\n                                  changeConfig : config => {\n                                                        dragMachine.update ( 'changeConfig', {hooks,config} )\n                                                                   .then   ( hooks => dragMachine.setDependencies({hooks})   )\n                                                    }\n                                , destroy     : ()    => dragMachine.update ( 'destroy' )\n                                , disable     : ()    => dragMachine.update ( 'disable' )\n                                , enable      : ()    => dragMachine.update ( 'enable'  )\n                            }))\n} // dragDrop func.\n\n\n\nexport default dragDrop\n\n\n\n\n\n\n// function yok () { console.log ( 'injected' )}\n\n// const cfg = {\n//             ignoreSelect ( e ) {\n//                         const tg = e.target;\n//                         if (!tg.classList.contains ( 'dropzone' ))   return true\n//                         else         return false\n//                 }\n//           , onDropOut ({ dependencies, event, dragged, selection, log, dragOffset, dropZone }) {\n//                         console.log ( 'YES drop out' )\n//                         dependencies.yok ()\n//                 }\n//           , dependencies : {\n//                                 yok\n//                         }\n//         }\n// dragDrop (cfg)\n//  .then ( x => {\n//         dd.on ( 'transition', (s,m) => {\n//                 console.log ( s,m )\n//         })\n//  })\n\n\n"],"names":["askForPromise","list","listOfPromiseObjects","map","el","_singlePromise","listOfPromises","o","promise","onComplete","_after","Promise","all","readPromiseState","state","then","catch","each","cbFn","args","forEach","prom","i","value","done","cancel","timeout","askObject","promises","response","_timeout","_manyPromises","x","resolve","reject","fx","rejectFx","res","isList","main","ttl","expMsg","timer","setTimeout","clearTimeout","race","findType","nodeType","Array","copyObject","resource","result","extend","cb","breadcrumbs","keyCallback","objectCallback","Object","keys","k","type","item","resultIsArray","keyNumber","isNaN","IGNORE","Symbol","isRoot","br","key","push","generateList","keyRes","canInsert","validateForInsertion","newObject","newArray","data","location","ex","callback","walk","options","origin","root","plus","next","e","t","n","r","convert","isDTO","s","isDTM","c","a","u","export","copy","from","toFlat","console","warn","l","RegExp","replace","insert","getCopy","draft","INIT_DATA_TYPES","load","set","connect","save","f","arguments","as","p","d","length","h","includes","m","error","to","resetScan","this","setupFilter","flatData","insertSegment","model","query","listSegments","getIndexes","reduce","index","getLine","extractList","Error","hasOwnProperty","match","setupScanList","getScanList","every","name","links","finish","entries","empty","b","_","y","g","$","E","listObject","object","j","edges","v","getFilters","O","use","get","find","like","look","sequence","task","listGen","wait","at","reverse","split","pop","join","startsWith","values","sort","T","concat","I","Set","tagName","toLowerCase","has","add","S","A","F","dependencies","flatObject","init","assign","flating","converting","getWalk","w","N","L","D","H","flat","_setTransitions","transitions","nextState","chainActions","_updateStateData","dtbox","stateData","splitSegments","updateState","_updateStep","lock","_transit","_getChain","success","positive","transition","negative","log","_warn","api","_triggerCacheUpdate","cache","updateTask","action","dt","_onUpdateTask","update","setDependencies","getDependencies","on","off","importState","exportState","joinSegments","reset","initialState","initialStateData","ignoreCachedUpdates","getState","stateDataFormat","behavior","debug","global","debugFSM","getEventFunctions","dragDrop","ignoreSelect","mouseDown","event","target","draggable","mouseUp","altKey","shiftKey","mouseMove","dragStart","dragEnd","dragOver","preventDefault","dragEnter","drop","fn","minMax","startX","startY","newX","newY","xMin","Math","min","xMax","max","yMin","yMax","updateSelection","coordinates","node","style","left","top","width","height","drawSelection","selectDraw","draw","visibility","document","createElement","position","border","getElementsByTagName","appendChild","clientX","clientY","targetList","container","querySelectorAll","selection","parentNode","findDropZone","dropStyle","classList","contains","hooks","onDrop","dropZone","dragged","dragOffset","removeChild","onStartDragging","draggedTransperency","selectStyle","opacity","onDropOut","logic","filter","activeDropZone","activeZoneStyle","mouseSelection","hasDrop","tranistions","start","eFn","addEventListener","startSelection","st","changeSelection","endSelection","prevSelection","selectionType","remove","dragNodes","check","offsetLeft","offsetTop","clientWidth","clientHeight","addSingleItem","listHasTarget","validNode","removeSingleItem","replaceSelection","startDragging","deps","validTarget","offsetX","offsetY","changeDragZone","oldDropZone","actZone","endDragging","sourceList","source","removeAttribute","destroy","removeEventListener","setConfig","config","disable","enable","don","dragMachine","Fsm","window","dd","changeConfig"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7]}